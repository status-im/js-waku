<!doctype html>
<html class="default no-js">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>js-waku</title>
	<meta name="description" content="Documentation for js-waku">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="assets/css/main.css">
	<script async src="assets/js/search.js" id="search-script"></script>
</head>
<body>
<header>
	<div class="tsd-page-toolbar">
		<div class="container">
			<div class="table-wrap">
				<div class="table-cell" id="tsd-search" data-index="assets/js/search.json" data-base=".">
					<div class="field">
						<label for="tsd-search-field" class="tsd-widget search no-caption">Search</label>
						<input id="tsd-search-field" type="text" />
					</div>
					<ul class="results">
						<li class="state loading">Preparing search index...</li>
						<li class="state failure">The search index is not available</li>
					</ul>
					<a href="index.html" class="title">js-waku</a>
				</div>
				<div class="table-cell" id="tsd-widgets">
					<div id="tsd-filter">
						<a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a>
						<div class="tsd-filter-group">
							<div class="tsd-select" id="tsd-filter-visibility">
								<span class="tsd-select-label">All</span>
								<ul class="tsd-select-list">
									<li data-value="public">Public</li>
									<li data-value="protected">Public/Protected</li>
									<li data-value="private" class="selected">All</li>
								</ul>
							</div>
							<input type="checkbox" id="tsd-filter-inherited" checked />
							<label class="tsd-widget" for="tsd-filter-inherited">Inherited</label>
							<input type="checkbox" id="tsd-filter-externals" checked />
							<label class="tsd-widget" for="tsd-filter-externals">Externals</label>
						</div>
					</div>
					<a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a>
				</div>
			</div>
		</div>
	</div>
	<div class="tsd-page-title">
		<div class="container">
			<h1>js-waku</h1>
		</div>
	</div>
</header>
<div class="container container-main">
	<div class="row">
		<div class="col-8 col-content">
			<div class="tsd-panel tsd-typography">
				<a href="#js-waku" id="js-waku" style="color: inherit; text-decoration: none;">
					<h1>js-waku</h1>
				</a>
				<p>A JavaScript implementation of the <a href="https://rfc.vac.dev/spec/10/">Waku v2 protocol</a>.</p>
				<a href="#documentation" id="documentation" style="color: inherit; text-decoration: none;">
					<h2>Documentation</h2>
				</a>
				<p>In the <a href="#usage">section below</a> you can find explanations for the main API.</p>
				<p>We also have <a href="https://github.com/status-im/js-waku/blob/main/guides/menu.md">guides</a> available
				and <a href="https://github.com/status-im/js-waku/blob/main/examples/examples.md">code examples</a>.</p>
				<p>You can read the latest <code>main</code> branch documentation at <a href="https://status-im.github.io/js-waku/docs/">https://status-im.github.io/js-waku/docs/</a>.</p>
				<p>Docs can also be generated locally using:</p>
				<pre><code class="language-shell"><span style="color: #000000">npm install</span>
<span style="color: #000000">npm run doc</span>
</code></pre>
				<a href="#usage" id="usage" style="color: inherit; text-decoration: none;">
					<h2>Usage</h2>
				</a>
				<p>Install <code>js-waku</code> package:</p>
				<pre><code class="language-shell"><span style="color: #000000">npm install js-waku</span>
</code></pre>
				<a href="#start-a-waku-node" id="start-a-waku-node" style="color: inherit; text-decoration: none;">
					<h3>Start a waku node</h3>
				</a>
				<pre><code class="language-ts"><span style="color: #AF00DB">import</span><span style="color: #000000"> { </span><span style="color: #001080">Waku</span><span style="color: #000000"> } </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;js-waku&#039;</span><span style="color: #000000">;</span>

<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">waku</span><span style="color: #000000"> = </span><span style="color: #AF00DB">await</span><span style="color: #000000"> </span><span style="color: #001080">Waku</span><span style="color: #000000">.</span><span style="color: #795E26">create</span><span style="color: #000000">();</span>
</code></pre>
				<a href="#connect-to-a-new-peer" id="connect-to-a-new-peer" style="color: inherit; text-decoration: none;">
					<h3>Connect to a new peer</h3>
				</a>
				<pre><code class="language-ts"><span style="color: #008000">// Directly dial a new peer</span>
<span style="color: #AF00DB">await</span><span style="color: #000000"> </span><span style="color: #001080">waku</span><span style="color: #000000">.</span><span style="color: #795E26">dial</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;/dns4/node-01.do-ams3.wakuv2.test.statusim.net/tcp/443/wss/p2p/16Uiu2HAmPLe7Mzm8TsYUubgCAW1aJoeFScxrLj8ppHFivPo97bUZ&#039;</span><span style="color: #000000">);</span>

<span style="color: #008000">// Or, add peer to address book so it auto dials in the background</span>
<span style="color: #001080">waku</span><span style="color: #000000">.</span><span style="color: #795E26">addPeerToAddressBook</span><span style="color: #000000">(</span>
<span style="color: #000000">  </span><span style="color: #A31515">&#039;16Uiu2HAmPLe7Mzm8TsYUubgCAW1aJoeFScxrLj8ppHFivPo97bUZ&#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">  [</span><span style="color: #A31515">&#039;/dns4/node-01.do-ams3.wakuv2.test.statusim.net/tcp/443/wss&#039;</span><span style="color: #000000">]</span>
<span style="color: #000000">);</span>
</code></pre>
				<p>You can also use <code>getStatusFleetNodes</code> to connect to nodes run by Status:</p>
				<pre><code class="language-ts"><span style="color: #AF00DB">import</span><span style="color: #000000"> { </span><span style="color: #001080">getStatusFleetNodes</span><span style="color: #000000"> } </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;js-waku&#039;</span><span style="color: #000000">;</span>

<span style="color: #795E26">getStatusFleetNodes</span><span style="color: #000000">().</span><span style="color: #795E26">then</span><span style="color: #000000">((</span><span style="color: #001080">nodes</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> {</span>
<span style="color: #000000">  </span><span style="color: #001080">nodes</span><span style="color: #000000">.</span><span style="color: #795E26">forEach</span><span style="color: #000000">((</span><span style="color: #001080">addr</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> {</span>
<span style="color: #000000">    </span><span style="color: #001080">waku</span><span style="color: #000000">.</span><span style="color: #795E26">dial</span><span style="color: #000000">(</span><span style="color: #001080">addr</span><span style="color: #000000">);</span>
<span style="color: #000000">  });</span>
<span style="color: #000000">});</span>
</code></pre>
				<a href="#listen-for-messages" id="listen-for-messages" style="color: inherit; text-decoration: none;">
					<h3>Listen for messages</h3>
				</a>
				<p>The <code>contentTopic</code> is a metadata <code>string</code> that allows categorization of messages on the waku network.
					Depending on your use case, you can either create one (or several) new <code>contentTopic</code>(s) or look at the <a href="https://rfc.vac.dev/">RFCs</a> and use an existing <code>contentTopic</code>.
				See the <a href="https://rfc.vac.dev/spec/23/">Waku v2 Topic Usage Recommendations</a> for more details.</p>
				<p>For example, if you were to use a new <code>contentTopic</code> such as <code>/my-cool-app/1/my-use-case/proto</code>,
				here is how to listen to new messages received via <a href="https://rfc.vac.dev/spec/11/">Waku v2 Relay</a>:</p>
				<pre><code class="language-ts"><span style="color: #001080">waku</span><span style="color: #000000">.</span><span style="color: #001080">relay</span><span style="color: #000000">.</span><span style="color: #795E26">addObserver</span><span style="color: #000000">((</span><span style="color: #001080">msg</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> {</span>
<span style="color: #000000">  </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;Message received:&quot;</span><span style="color: #000000">, </span><span style="color: #001080">msg</span><span style="color: #000000">.</span><span style="color: #001080">payloadAsUtf8</span><span style="color: #000000">)</span>
<span style="color: #000000">}, [</span><span style="color: #A31515">&quot;/my-cool-app/1/my-use-case/proto&quot;</span><span style="color: #000000">]);</span>
</code></pre>
				<p>The examples chat apps currently use content topic <code>&quot;/toy-chat/2/huilong/proto&quot;</code>.</p>
				<a href="#send-messages" id="send-messages" style="color: inherit; text-decoration: none;">
					<h3>Send messages</h3>
				</a>
				<p>There are two ways to send messages:</p>
				<a href="#waku-relay" id="waku-relay" style="color: inherit; text-decoration: none;">
					<h4>Waku Relay</h4>
				</a>
				<p><a href="https://rfc.vac.dev/spec/11/">Waku Relay</a> is the most decentralized option,
					peer receiving your messages are unlikely to know whether you are the originator or simply forwarding them.
				However, it does not give you any delivery information.</p>
				<pre><code class="language-ts"><span style="color: #AF00DB">import</span><span style="color: #000000"> { </span><span style="color: #001080">WakuMessage</span><span style="color: #000000"> } </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;js-waku&#039;</span><span style="color: #000000">;</span>

<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">msg</span><span style="color: #000000"> = </span><span style="color: #AF00DB">await</span><span style="color: #000000"> </span><span style="color: #001080">WakuMessage</span><span style="color: #000000">.</span><span style="color: #795E26">fromUtf8String</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;Here is a message!&quot;</span><span style="color: #000000">, </span><span style="color: #A31515">&quot;/my-cool-app/1/my-use-case/proto&quot;</span><span style="color: #000000">)</span>
<span style="color: #AF00DB">await</span><span style="color: #000000"> </span><span style="color: #001080">waku</span><span style="color: #000000">.</span><span style="color: #001080">relay</span><span style="color: #000000">.</span><span style="color: #795E26">send</span><span style="color: #000000">(</span><span style="color: #001080">msg</span><span style="color: #000000">);</span>
</code></pre>
				<a href="#waku-light-push" id="waku-light-push" style="color: inherit; text-decoration: none;">
					<h4>Waku Light Push</h4>
				</a>
				<p><a href="https://rfc.vac.dev/spec/19/">Waku Light Push</a> gives you confirmation that the light push server node has
					received your message.
					However, it means that said node knows you are the originator of the message.
				It cannot guarantee that the node will forward the message.</p>
				<pre><code class="language-ts"><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">ack</span><span style="color: #000000"> = </span><span style="color: #AF00DB">await</span><span style="color: #000000"> </span><span style="color: #001080">waku</span><span style="color: #000000">.</span><span style="color: #001080">lightPush</span><span style="color: #000000">.</span><span style="color: #795E26">push</span><span style="color: #000000">(</span><span style="color: #001080">message</span><span style="color: #000000">);</span>
<span style="color: #AF00DB">if</span><span style="color: #000000"> (!</span><span style="color: #001080">ack</span><span style="color: #000000">?.</span><span style="color: #001080">isSuccess</span><span style="color: #000000">) {</span>
<span style="color: #000000">  </span><span style="color: #008000">// Message was not sent</span>
<span style="color: #000000">}</span>
</code></pre>
				<a href="#retrieve-archived-messages" id="retrieve-archived-messages" style="color: inherit; text-decoration: none;">
					<h3>Retrieve archived messages</h3>
				</a>
				<p>The <a href="https://rfc.vac.dev/spec/13/">Waku v2 Store protocol</a> enables more permanent nodes to store messages received via relay
					and ephemeral clients to retrieve them (e.g. mobile phone resuming connectivity).
				The protocol implements pagination meaning that it may take several queries to retrieve all messages.</p>
				<p>Query a waku store peer to check historical messages:</p>
				<pre><code class="language-ts"><span style="color: #008000">// Process messages once they are all retrieved</span>
<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">messages</span><span style="color: #000000"> = </span><span style="color: #AF00DB">await</span><span style="color: #000000"> </span><span style="color: #001080">waku</span><span style="color: #000000">.</span><span style="color: #001080">store</span><span style="color: #000000">.</span><span style="color: #795E26">queryHistory</span><span style="color: #000000">({ </span><span style="color: #001080">contentTopics:</span><span style="color: #000000"> [</span><span style="color: #A31515">&quot;/my-cool-app/1/my-use-case/proto&quot;</span><span style="color: #000000">] });</span>
<span style="color: #001080">messages</span><span style="color: #000000">.</span><span style="color: #795E26">forEach</span><span style="color: #000000">((</span><span style="color: #001080">msg</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> {</span>
<span style="color: #000000">  </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;Message retrieved:&quot;</span><span style="color: #000000">, </span><span style="color: #001080">msg</span><span style="color: #000000">.</span><span style="color: #001080">payloadAsUtf8</span><span style="color: #000000">)</span>
<span style="color: #000000">})</span>

<span style="color: #008000">// Or, pass a callback function to be executed as pages are received:</span>
<span style="color: #001080">waku</span><span style="color: #000000">.</span><span style="color: #001080">store</span><span style="color: #000000">.</span><span style="color: #795E26">queryHistory</span><span style="color: #000000">({</span>
<span style="color: #000000">    </span><span style="color: #001080">contentTopics:</span><span style="color: #000000"> [</span><span style="color: #A31515">&quot;/my-cool-app/1/my-use-case/proto&quot;</span><span style="color: #000000">],</span>
<span style="color: #000000">    </span><span style="color: #795E26">callback</span><span style="color: #001080">:</span><span style="color: #000000"> (</span><span style="color: #001080">messages</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> {</span>
<span style="color: #000000">      </span><span style="color: #001080">messages</span><span style="color: #000000">.</span><span style="color: #795E26">forEach</span><span style="color: #000000">((</span><span style="color: #001080">msg</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> {</span>
<span style="color: #000000">        </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;Message retrieved:&quot;</span><span style="color: #000000">, </span><span style="color: #001080">msg</span><span style="color: #000000">.</span><span style="color: #001080">payloadAsUtf8</span><span style="color: #000000">);</span>
<span style="color: #000000">      });</span>
<span style="color: #000000">    }</span>
<span style="color: #000000">  });</span>
</code></pre>
				<a href="#encryption-amp-signature" id="encryption-amp-signature" style="color: inherit; text-decoration: none;">
					<h3>Encryption &amp; Signature</h3>
				</a>
				<p>With js-waku, you can:</p>
				<ul>
					<li>Encrypt messages over the wire using public/private key pair (asymmetric encryption),</li>
					<li>Encrypt messages over the wire using a unique key to both encrypt and decrypt (symmetric encryption),</li>
					<li>Sign and verify your waku messages (must use encryption, compatible with both symmetric and asymmetric).</li>
				</ul>
				<a href="#cryptographic-libraries" id="cryptographic-libraries" style="color: inherit; text-decoration: none;">
					<h4>Cryptographic Libraries</h4>
				</a>
				<p>A quick note on the cryptographic libraries used as it is a not a straightforward affair:</p>
				<ul>
					<li>Asymmetric encryption:
						Uses <a href="https://github.com/cyrildever/ecies-geth/">ecies-geth</a>
						which in turns uses <a href="https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto">SubtleCrypto</a> Web API (browser),
						<a href="https://www.npmjs.com/package/secp256k1">secp256k1</a> (native binding for node)
					or <a href="https://www.npmjs.com/package/elliptic">elliptic</a> (pure JS if none of the other libraries are available).</li>
					<li>Symmetric encryption:
						Uses <a href="https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto">SubtleCrypto</a> Web API (browser)
					or <a href="https://nodejs.org/api/crypto.html">NodeJS&#39; crypto</a> module.</li>
				</ul>
				<a href="#create-new-keys" id="create-new-keys" style="color: inherit; text-decoration: none;">
					<h3>Create new keys</h3>
				</a>
				<p>Asymmetric private keys and symmetric keys are expected to be 32 bytes arrays.</p>
				<pre><code class="language-ts"><span style="color: #AF00DB">import</span><span style="color: #000000"> { </span><span style="color: #001080">generatePrivateKey</span><span style="color: #000000">, </span><span style="color: #001080">getPublicKey</span><span style="color: #000000"> } </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;js-waku&#039;</span><span style="color: #000000">;</span>

<span style="color: #008000">// Asymmetric</span>
<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">privateKey</span><span style="color: #000000"> = </span><span style="color: #795E26">generatePrivateKey</span><span style="color: #000000">();</span>
<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">publicKey</span><span style="color: #000000"> = </span><span style="color: #795E26">getPublicKey</span><span style="color: #000000">(</span><span style="color: #001080">privateKey</span><span style="color: #000000">);</span>

<span style="color: #008000">// Symmetric</span>
<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">symKey</span><span style="color: #000000"> = </span><span style="color: #795E26">generatePrivateKey</span><span style="color: #000000">();</span>
</code></pre>
				<a href="#encrypt-waku-messages" id="encrypt-waku-messages" style="color: inherit; text-decoration: none;">
					<h4>Encrypt Waku Messages</h4>
				</a>
				<p>To encrypt your waku messages, simply pass the encryption key when creating it:</p>
				<pre><code class="language-ts"><span style="color: #AF00DB">import</span><span style="color: #000000"> { </span><span style="color: #001080">WakuMessage</span><span style="color: #000000"> } </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">&quot;js-waku&quot;</span><span style="color: #000000">;</span>

<span style="color: #008000">// Asymmetric</span>
<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">message1</span><span style="color: #000000"> = </span><span style="color: #AF00DB">await</span><span style="color: #000000"> </span><span style="color: #001080">WakuMessage</span><span style="color: #000000">.</span><span style="color: #795E26">fromBytes</span><span style="color: #000000">(</span><span style="color: #001080">payload</span><span style="color: #000000">, </span><span style="color: #001080">myAppContentTopic</span><span style="color: #000000">, {</span>
<span style="color: #000000">  </span><span style="color: #001080">encPublicKey:</span><span style="color: #000000"> </span><span style="color: #001080">publicKey</span><span style="color: #000000">,</span>
<span style="color: #000000">});</span>

<span style="color: #008000">// Symmetric</span>
<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">message2</span><span style="color: #000000"> = </span><span style="color: #AF00DB">await</span><span style="color: #000000"> </span><span style="color: #001080">WakuMessage</span><span style="color: #000000">.</span><span style="color: #795E26">fromBytes</span><span style="color: #000000">(</span><span style="color: #001080">payload</span><span style="color: #000000">, </span><span style="color: #001080">myAppContentTopic</span><span style="color: #000000">, {</span>
<span style="color: #000000">  </span><span style="color: #001080">symKey:</span><span style="color: #000000"> </span><span style="color: #001080">symKey</span><span style="color: #000000">,</span>
<span style="color: #000000">});</span>

</code></pre>
				<a href="#decrypt-waku-messages" id="decrypt-waku-messages" style="color: inherit; text-decoration: none;">
					<h4>Decrypt Waku Messages</h4>
				</a>
				<a href="#waku-relay-1" id="waku-relay-1" style="color: inherit; text-decoration: none;">
					<h5>Waku Relay</h5>
				</a>
				<p>If you expect to receive encrypted messages then simply add private decryption key(s) to <code>WakuRelay</code>.
					Waku Relay will attempt to decrypt incoming messages with each keys, both for symmetric and asymmetric encryption.
				Messages that are successfully decrypted (or received in clear) will be passed to the observers, other messages will be omitted.</p>
				<pre><code class="language-ts"><span style="color: #008000">// Asymmetric</span>
<span style="color: #001080">waku</span><span style="color: #000000">.</span><span style="color: #001080">relay</span><span style="color: #000000">.</span><span style="color: #795E26">addDecryptionKey</span><span style="color: #000000">(</span><span style="color: #001080">privateKey</span><span style="color: #000000">);</span>

<span style="color: #008000">// Symmetric</span>
<span style="color: #001080">waku</span><span style="color: #000000">.</span><span style="color: #001080">relay</span><span style="color: #000000">.</span><span style="color: #795E26">addDecryptionKey</span><span style="color: #000000">(</span><span style="color: #001080">symKey</span><span style="color: #000000">);</span>

<span style="color: #008000">// Then add the observer</span>
<span style="color: #001080">waku</span><span style="color: #000000">.</span><span style="color: #001080">relay</span><span style="color: #000000">.</span><span style="color: #795E26">addObserver</span><span style="color: #000000">(</span><span style="color: #001080">callback</span><span style="color: #000000">, [</span><span style="color: #001080">contentTopic</span><span style="color: #000000">]);</span>
</code></pre>
				<p>Keys can be removed using <code>WakuMessage.deleteDecryptionKey</code>.</p>
				<a href="#waku-store" id="waku-store" style="color: inherit; text-decoration: none;">
					<h5>Waku Store</h5>
				</a>
				<pre><code class="language-ts"><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">messages</span><span style="color: #000000"> = </span><span style="color: #AF00DB">await</span><span style="color: #000000"> </span><span style="color: #001080">waku</span><span style="color: #000000">.</span><span style="color: #001080">store</span><span style="color: #000000">.</span><span style="color: #795E26">queryHistory</span><span style="color: #000000">({</span>
<span style="color: #000000">  </span><span style="color: #001080">contentTopics:</span><span style="color: #000000"> [],</span>
<span style="color: #000000">  </span><span style="color: #001080">decryptionKeys:</span><span style="color: #000000"> [</span><span style="color: #001080">privateKey</span><span style="color: #000000">, </span><span style="color: #001080">symKey</span><span style="color: #000000">],</span>
<span style="color: #000000">});</span>
</code></pre>
				<p>Similarly to relay, only decrypted or clear messages will be returned.</p>
				<a href="#sign-waku-messages" id="sign-waku-messages" style="color: inherit; text-decoration: none;">
					<h4>Sign Waku Messages</h4>
				</a>
				<p>As per version 1`s <a href="https://rfc.vac.dev/spec/26/">specs</a>, signatures are only included in encrypted messages.
				In the case where your app does not need encryption then you could use symmetric encryption with a trivial key, I intend to dig <a href="https://github.com/status-im/js-waku/issues/74#issuecomment-880440186">more on the subject</a> and come back with recommendation and examples.</p>
				<p>Signature keys can be generated the same way asymmetric keys for encryption are:</p>
				<pre><code class="language-ts"><span style="color: #AF00DB">import</span><span style="color: #000000"> { </span><span style="color: #001080">generatePrivateKey</span><span style="color: #000000">, </span><span style="color: #001080">getPublicKey</span><span style="color: #000000">, </span><span style="color: #001080">WakuMessage</span><span style="color: #000000"> } </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">&quot;js-waku&quot;</span><span style="color: #000000">;</span>

<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">signPrivateKey</span><span style="color: #000000"> = </span><span style="color: #795E26">generatePrivateKey</span><span style="color: #000000">();</span>

<span style="color: #008000">// Asymmetric Encryption</span>
<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">message1</span><span style="color: #000000"> = </span><span style="color: #AF00DB">await</span><span style="color: #000000"> </span><span style="color: #001080">WakuMessage</span><span style="color: #000000">.</span><span style="color: #795E26">fromBytes</span><span style="color: #000000">(</span><span style="color: #001080">payload</span><span style="color: #000000">, </span><span style="color: #001080">myAppContentTopic</span><span style="color: #000000">, {</span>
<span style="color: #000000">  </span><span style="color: #001080">encPublicKey:</span><span style="color: #000000"> </span><span style="color: #001080">recipientPublicKey</span><span style="color: #000000">,</span>
<span style="color: #000000">  </span><span style="color: #001080">sigPrivKey:</span><span style="color: #000000"> </span><span style="color: #001080">signPrivateKey</span><span style="color: #000000">,</span>
<span style="color: #000000">});</span>

<span style="color: #008000">// Symmetric Encryption</span>
<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">message2</span><span style="color: #000000"> = </span><span style="color: #AF00DB">await</span><span style="color: #000000"> </span><span style="color: #001080">WakuMessage</span><span style="color: #000000">.</span><span style="color: #795E26">fromBytes</span><span style="color: #000000">(</span><span style="color: #001080">payload</span><span style="color: #000000">, </span><span style="color: #001080">myAppContentTopic</span><span style="color: #000000">, {</span>
<span style="color: #000000">  </span><span style="color: #001080">encPublicKey:</span><span style="color: #000000"> </span><span style="color: #001080">symKey</span><span style="color: #000000">,</span>
<span style="color: #000000">  </span><span style="color: #001080">sigPrivKey:</span><span style="color: #000000"> </span><span style="color: #001080">signPrivateKey</span><span style="color: #000000">,</span>
<span style="color: #000000">});</span>

</code></pre>
				<a href="#verify-waku-message-signatures" id="verify-waku-message-signatures" style="color: inherit; text-decoration: none;">
					<h4>Verify Waku Message signatures</h4>
				</a>
				<p>Two fields are available on <code>WakuMessage</code> regarding signatures:</p>
				<ul>
					<li><code>signaturePublicKey</code>: If the message is signed, it holds the public key of the signature,</li>
					<li><code>signature</code>: If the message is signed, it holds the actual signature.</li>
				</ul>
				<p>Thus, if you expect messages to be signed by Alice,
					you can simply compare <code>WakuMessage.signaturePublicKey</code> with Alice&#39;s public key.
					As comparing hex string can lead to issues (is the <code>0x</code> prefix present?),
				simply use helper function <code>equalByteArrays</code>.</p>
				<pre><code class="language-ts"><span style="color: #AF00DB">import</span><span style="color: #000000"> { </span><span style="color: #001080">equalByteArrays</span><span style="color: #000000"> } </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;js-waku/lib/utils&#039;</span><span style="color: #000000">;</span>

<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">sigPubKey</span><span style="color: #000000"> = </span><span style="color: #001080">wakuMessage</span><span style="color: #000000">.</span><span style="color: #001080">signaturePublicKey</span><span style="color: #000000">;</span>

<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">isSignedByAlice</span><span style="color: #000000"> = </span><span style="color: #001080">sigPubKey</span><span style="color: #000000"> &amp;&amp; </span><span style="color: #795E26">equalByteArrays</span><span style="color: #000000">(</span><span style="color: #001080">sigPubKey</span><span style="color: #000000">, </span><span style="color: #001080">alicePublicKey</span><span style="color: #000000">);</span>
</code></pre>
				<a href="#changelog" id="changelog" style="color: inherit; text-decoration: none;">
					<h2>Changelog</h2>
				</a>
				<p>Release changelog can be found <a href="https://github.com/status-im/js-waku/blob/main/CHANGELOG.md">here</a>.</p>
				<a href="#bugs-questions-amp-features" id="bugs-questions-amp-features" style="color: inherit; text-decoration: none;">
					<h2>Bugs, Questions &amp; Features</h2>
				</a>
				<p>If you encounter any bug or would like to propose new features, feel free to <a href="https://github.com/status-im/js-waku/issues/new/">open an issue</a>.</p>
				<p>To get help, join #dappconnect-support on <a href="https://discord.gg/j5pGbn7MHZ">Vac Discord</a> or <a href="https://t.me/dappconnectsupport">Telegram</a>.</p>
				<p>For more general discussion and latest news, join #dappconnect on <a href="https://discord.gg/9DgykdmpZ6">Vac Discord</a> or <a href="https://t.me/dappconnect">Telegram</a>.</p>
				<a href="#waku-protocol-support" id="waku-protocol-support" style="color: inherit; text-decoration: none;">
					<h2>Waku Protocol Support</h2>
				</a>
				<p>You can track progress on the <a href="https://github.com/status-im/js-waku/projects/1">project board</a>.</p>
				<ul>
					<li>âœ”: Supported</li>
					<li>ðŸš§: Implementation in progress</li>
					<li>â›”: Support is not planned</li>
				</ul>
				<table>
					<thead>
						<tr>
							<th>Spec</th>
							<th>Implementation Status</th>
						</tr>
					</thead>
					<tbody><tr>
							<td><a href="https://rfc.vac.dev/spec/6">6/WAKU1</a></td>
							<td>â›”</td>
						</tr>
						<tr>
							<td><a href="https://rfc.vac.dev/spec/7">7/WAKU-DATA</a></td>
							<td>â›”</td>
						</tr>
						<tr>
							<td><a href="https://rfc.vac.dev/spec/8">8/WAKU-MAIL</a></td>
							<td>â›”</td>
						</tr>
						<tr>
							<td><a href="https://rfc.vac.dev/spec/9">9/WAKU-RPC</a></td>
							<td>â›”</td>
						</tr>
						<tr>
							<td><a href="https://rfc.vac.dev/spec/10">10/WAKU2</a></td>
							<td>ðŸš§</td>
						</tr>
						<tr>
							<td><a href="https://rfc.vac.dev/spec/11">11/WAKU2-RELAY</a></td>
							<td>âœ”</td>
						</tr>
						<tr>
							<td><a href="https://rfc.vac.dev/spec/12">12/WAKU2-FILTER</a></td>
							<td></td>
						</tr>
						<tr>
							<td><a href="https://rfc.vac.dev/spec/13">13/WAKU2-STORE</a></td>
							<td>âœ” (querying node only)</td>
						</tr>
						<tr>
							<td><a href="https://rfc.vac.dev/spec/14">14/WAKU2-MESSAGE</a></td>
							<td>âœ”</td>
						</tr>
						<tr>
							<td><a href="https://rfc.vac.dev/spec/15">15/WAKU2-BRIDGE</a></td>
							<td></td>
						</tr>
						<tr>
							<td><a href="https://rfc.vac.dev/spec/16">16/WAKU2-RPC</a></td>
							<td>â›”</td>
						</tr>
						<tr>
							<td><a href="https://rfc.vac.dev/spec/17">17/WAKU2-RLNRELAY</a></td>
							<td></td>
						</tr>
						<tr>
							<td><a href="https://rfc.vac.dev/spec/18">18/WAKU2-SWAP</a></td>
							<td></td>
						</tr>
						<tr>
							<td><a href="https://rfc.vac.dev/spec/19/">19/WAKU2-LIGHTPUSH</a></td>
							<td>âœ”</td>
						</tr>
				</tbody></table>
				<a href="#contributing" id="contributing" style="color: inherit; text-decoration: none;">
					<h2>Contributing</h2>
				</a>
				<p>See <a href="./CONTRIBUTING.md">CONTRIBUTING.md</a>.</p>
				<a href="#license" id="license" style="color: inherit; text-decoration: none;">
					<h2>License</h2>
				</a>
				<p>Licensed and distributed under either of</p>
				<ul>
					<li>MIT license: <a href="LICENSE-MIT">LICENSE-MIT</a> or <a href="http://opensource.org/licenses/MIT">http://opensource.org/licenses/MIT</a></li>
				</ul>
				<p>or</p>
				<ul>
					<li>Apache License, Version 2.0, (<a href="LICENSE-APACHE-v2">LICENSE-APACHE-v2</a> or <a href="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</a>)</li>
				</ul>
				<p>at your option. These files may not be copied, modified, or distributed except according to those terms.</p>
			</div>
		</div>
		<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
			<nav class="tsd-navigation primary">
				<ul>
					<li class=" ">
						<a href="modules.html">Exports</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/index.html">index</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/lib_chat_message.html">lib/chat_<wbr>message</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/lib_delay.html">lib/delay</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/lib_discover.html">lib/discover</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/lib_select_peer.html">lib/select_<wbr>peer</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/lib_utils.html">lib/utils</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/lib_waku.html">lib/waku</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/lib_waku_light_push.html">lib/waku_<wbr>light_<wbr>push</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/lib_waku_light_push_push_rpc.html">lib/waku_<wbr>light_<wbr>push/push_<wbr>rpc</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/lib_waku_message.html">lib/waku_<wbr>message</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/lib_waku_message_symmetric.html">lib/waku_<wbr>message/symmetric</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/lib_waku_message_symmetric_browser.html">lib/waku_<wbr>message/symmetric/browser</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/lib_waku_message_symmetric_node.html">lib/waku_<wbr>message/symmetric/node</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/lib_waku_message_version_1.html">lib/waku_<wbr>message/version_<wbr>1</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/lib_waku_relay.html">lib/waku_<wbr>relay</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/lib_waku_relay_constants.html">lib/waku_<wbr>relay/constants</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/lib_waku_relay_get_relay_peers.html">lib/waku_<wbr>relay/get_<wbr>relay_<wbr>peers</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/lib_waku_store.html">lib/waku_<wbr>store</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/lib_waku_store_history_rpc.html">lib/waku_<wbr>store/history_<wbr>rpc</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/proto.html">proto</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/proto_chat_v2_chat_message.html">proto/chat/v2/chat_<wbr>message</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/proto_waku_v2_light_push.html">proto/waku/v2/light_<wbr>push</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/proto_waku_v2_message.html">proto/waku/v2/message</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/proto_waku_v2_store.html">proto/waku/v2/store</a>
					</li>
				</ul>
			</nav>
			<nav class="tsd-navigation secondary menu-sticky">
				<ul class="before-current">
				</ul>
			</nav>
		</div>
	</div>
</div>
<footer class="with-border-bottom">
	<div class="container">
		<h2>Legend</h2>
		<div class="tsd-legend-group">
			<ul class="tsd-legend">
				<li class="tsd-kind-variable"><span class="tsd-kind-icon">Variable</span></li>
				<li class="tsd-kind-function"><span class="tsd-kind-icon">Function</span></li>
				<li class="tsd-kind-type-alias"><span class="tsd-kind-icon">Type alias</span></li>
				<li class="tsd-kind-type-alias tsd-has-type-parameter"><span class="tsd-kind-icon">Type alias with type parameter</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-enum"><span class="tsd-kind-icon">Enumeration</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-interface"><span class="tsd-kind-icon">Interface</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-class"><span class="tsd-kind-icon">Class</span></li>
			</ul>
		</div>
	</div>
</footer>
<div class="container tsd-generator">
	<p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p>
</div>
<div class="overlay"></div>
<script src="assets/js/main.js"></script>
</body>
</html>